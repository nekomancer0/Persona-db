import{s as ie,o as ue,n as i}from"../chunks/scheduler.BWOwpdHh.js";import{S as fe,i as he,e as m,s as U,k as Q,v as _e,c as d,d as u,m as T,a as w,o as W,n as ee,w as _,q as f,b as P,r as me,t as M,f as R,x as S,g as de,h as pe,y as se,j as ge,l as ke,p as ve,u as be}from"../chunks/index.MrXRJrN0.js";import{h as te,u as ne,e as j}from"../chunks/each.MqN4OFCs.js";import"../chunks/stores.C_hhX81d.js";import{P as ye}from"../chunks/PartialUser.0Mh093ly.js";import{a as le}from"../chunks/api.CI0u685j.js";import{g as Ee}from"../chunks/entry.CvtO8IbG.js";function re(o,l,r){const e=o.slice();return e[4]=l[r],e}function oe(o,l,r){const e=o.slice();return e[8]=l[r],e}function we(o){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function Ce(o){let l,r,e=o[7].length&&$e(o);return{c(){e&&e.c(),l=S()},l(t){e&&e.l(t),l=S()},m(t,c){e&&e.m(t,c),P(t,l,c),r=!0},p(t,c){t[7].length&&e.p(t,c)},i(t){r||(M(e),r=!0)},o(t){R(e),r=!1},d(t){t&&u(l),e&&e.d(t)}}}function $e(o){let l,r,e=j(o[7]),t=[];for(let n=0;n<e.length;n+=1)t[n]=ae(oe(o,e,n));const c=n=>R(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();l=S()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);l=S()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);P(n,l,a),r=!0},p(n,a){if(a&2){e=j(n[7]);let s;for(s=0;s<e.length;s+=1){const g=oe(n,e,s);t[s]?(t[s].p(g,a),M(t[s],1)):(t[s]=ae(g),t[s].c(),M(t[s],1),t[s].m(l.parentNode,l))}for(de(),s=e.length;s<t.length;s+=1)c(s);pe()}},i(n){if(!r){for(let a=0;a<e.length;a+=1)M(t[a]);r=!0}},o(n){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)R(t[a]);r=!1},d(n){n&&u(l),se(t,n)}}}function ae(o){let l,r;return l=new ye({props:{user:o[8]}}),{c(){ge(l.$$.fragment)},l(e){ke(l.$$.fragment,e)},m(e,t){ve(l,e,t),r=!0},p:i,i(e){r||(M(l.$$.fragment,e),r=!0)},o(e){R(l.$$.fragment,e),r=!1},d(e){be(l,e)}}}function Se(o){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function Ie(o){return{c:i,l:i,m:i,p:i,d:i}}function Pe(o){let l,r=o[3].length&&qe(o);return{c(){r&&r.c(),l=S()},l(e){r&&r.l(e),l=S()},m(e,t){r&&r.m(e,t),P(e,l,t)},p(e,t){e[3].length&&r.p(e,t)},d(e){e&&u(l),r&&r.d(e)}}}function qe(o){let l,r=j(o[3]),e=[];for(let t=0;t<r.length;t+=1)e[t]=ce(re(o,r,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();l=S()},l(t){for(let c=0;c<e.length;c+=1)e[c].l(t);l=S()},m(t,c){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,c);P(t,l,c)},p(t,c){if(c&4){r=j(t[3]);let n;for(n=0;n<r.length;n+=1){const a=re(t,r,n);e[n]?e[n].p(a,c):(e[n]=ce(a),e[n].c(),e[n].m(l.parentNode,l))}for(;n<e.length;n+=1)e[n].d(1);e.length=r.length}},d(t){t&&u(l),se(e,t)}}}function ce(o){let l,r,e=o[4].name+"",t;return{c(){l=m("li"),r=m("a"),t=Q(e),this.h()},l(c){l=d(c,"LI",{});var n=w(l);r=d(n,"A",{href:!0});var a=w(r);t=W(a,e),a.forEach(u),n.forEach(u),this.h()},h(){_(r,"href",`/${o[4].code}`)},m(c,n){P(c,l,n),f(l,r),f(r,t)},p:i,d(c){c&&u(l)}}}function Ae(o){return{c:i,l:i,m:i,p:i,d:i}}function Me(o){let l,r,e,t,c,n,a,s,g,b,C,z,D,V,F,$,y,q,X="Users",G,J,E,A,Y="Characters",K,I,p={ctx:o,current:null,token:null,hasCatch:!1,pending:Se,then:Ce,catch:we,value:7,blocks:[,,,]};te(o[1](),p);let k={ctx:o,current:null,token:null,hasCatch:!1,pending:Ae,then:Pe,catch:Ie,value:3};return te(o[2](),k),{c(){l=m("meta"),r=m("meta"),t=m("meta"),c=m("meta"),a=m("meta"),s=U(),g=m("main"),b=m("div"),C=m("h1"),z=Q("Searching "),D=m("i"),V=Q(o[0]),F=U(),$=m("div"),y=m("div"),q=m("h2"),q.textContent=X,G=U(),p.block.c(),J=U(),E=m("div"),A=m("h2"),A.textContent=Y,K=U(),k.block.c(),this.h()},l(v){const h=_e("svelte-1q82o1r",document.head);l=d(h,"META",{name:!0,content:!0}),r=d(h,"META",{name:!0,content:!0}),t=d(h,"META",{property:!0,content:!0}),c=d(h,"META",{property:!0,content:!0}),a=d(h,"META",{property:!0,content:!0}),h.forEach(u),s=T(v),g=d(v,"MAIN",{});var B=w(g);b=d(B,"DIV",{class:!0});var H=w(b);C=d(H,"H1",{});var O=w(C);z=W(O,"Searching "),D=d(O,"I",{});var Z=w(D);V=W(Z,o[0]),Z.forEach(u),O.forEach(u),F=T(H),$=d(H,"DIV",{class:!0});var N=w($);y=d(N,"DIV",{class:!0});var x=w(y);q=d(x,"H2",{"data-svelte-h":!0}),ee(q)!=="svelte-owdh1y"&&(q.textContent=X),G=T(x),p.block.l(x),x.forEach(u),J=T(N),E=d(N,"DIV",{class:!0});var L=w(E);A=d(L,"H2",{"data-svelte-h":!0}),ee(A)!=="svelte-19nbxqm"&&(A.textContent=Y),K=T(L),k.block.l(L),L.forEach(u),N.forEach(u),H.forEach(u),B.forEach(u),this.h()},h(){document.title="Persona - Search",_(l,"name","author"),_(l,"content","Persona DB - Search"),_(r,"name","description"),_(r,"content",e="Search results for "+o[0]),_(t,"property","og:title"),_(t,"content","Persona DB - Search"),_(c,"property","og:description"),_(c,"content",n="Search results for "+o[0]),_(a,"property","og:image"),_(a,"content","https://persona-db.xyz/favicon.png"),_(y,"class","users"),_(E,"class","characters"),_($,"class","inline svelte-kkud9r"),_(b,"class","container")},m(v,h){f(document.head,l),f(document.head,r),f(document.head,t),f(document.head,c),f(document.head,a),P(v,s,h),P(v,g,h),f(g,b),f(b,C),f(C,z),f(C,D),f(D,V),f(b,F),f(b,$),f($,y),f(y,q),f(y,G),p.block.m(y,p.anchor=null),p.mount=()=>y,p.anchor=null,f($,J),f($,E),f(E,A),f(E,K),k.block.m(E,k.anchor=null),k.mount=()=>E,k.anchor=null,I=!0},p(v,[h]){o=v,(!I||h&1&&e!==(e="Search results for "+o[0]))&&_(r,"content",e),(!I||h&1&&n!==(n="Search results for "+o[0]))&&_(c,"content",n),(!I||h&1)&&me(V,o[0]),ne(p,o,h),ne(k,o,h)},i(v){I||(M(p.block),I=!0)},o(v){for(let h=0;h<3;h+=1){const B=p.blocks[h];R(B)}I=!1},d(v){v&&(u(s),u(g)),u(l),u(r),u(t),u(c),u(a),p.block.d(),p.token=null,p=null,k.block.d(),k.token=null,k=null}}}function De(o,l,r){let e="";async function t(){return(await le.getUsers()).filter(a=>a.username.includes(e))}async function c(){let n=await le.getCharacters(),a=[];for(let s of n)if(s.name.includes(e))a.push(s);else{let g=!1,b=e.split(" ");for(let C of b)s.tags.includes(C)&&(g=!0);g&&a.push(s)}return a}return ue(async()=>{const n=new Proxy(new URLSearchParams(window.location.search),{get:(a,s)=>a.get(s)});if(!n.q)return await Ee("/");r(0,e=decodeURIComponent(n.q))}),[e,t,c]}class xe extends fe{constructor(l){super(),he(this,l,De,Me,ie,{})}}export{xe as component};
