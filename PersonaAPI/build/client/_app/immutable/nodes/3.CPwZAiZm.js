import{s as ft,b as _e,a as Be,r as mt,n as rt,d as ve}from"../chunks/scheduler.BWOwpdHh.js";import{S as pt,i as ht,z as Pe,e as o,s as _,j as Re,v as _t,c,d as u,m as v,a as k,n as K,l as qe,w as a,q as n,b as Q,p as Fe,A as ie,t as Se,f as Oe,u as ze,k as it,o as lt,r as ot}from"../chunks/index.MrXRJrN0.js";import{g as vt}from"../chunks/entry.Cbhw0m9C.js";import"../chunks/stores.B2cYib0m.js";import{M as gt,T as bt,S as yt}from"../chunks/MarkdownEditor.BN6mLRls.js";import{a as at}from"../chunks/api.DB7-yUPC.js";function nt(i){let e,s,d;return{c(){e=o("div"),s=o("p"),d=it(i[0]),this.h()},l(l){e=c(l,"DIV",{class:!0});var t=k(e);s=c(t,"P",{});var f=k(s);d=lt(f,i[0]),f.forEach(u),t.forEach(u),this.h()},h(){a(e,"class","success alert svelte-1icyjj8")},m(l,t){Q(l,e,t),n(e,s),n(s,d)},p(l,t){t&1&&ot(d,l[0])},d(l){l&&u(e)}}}function st(i){let e,s,d;return{c(){e=o("div"),s=o("p"),d=it(i[1]),this.h()},l(l){e=c(l,"DIV",{class:!0});var t=k(e);s=c(t,"P",{});var f=k(s);d=lt(f,i[1]),f.forEach(u),t.forEach(u),this.h()},h(){a(e,"class","error alert svelte-1icyjj8")},m(l,t){Q(l,e,t),n(e,s),n(s,d)},p(l,t){t&2&&ot(d,l[1])},d(l){l&&u(e)}}}function kt(i){let e,s="Upload Icon",d,l;return{c(){e=o("button"),e.textContent=s},l(t){e=c(t,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-qnmkvj"&&(e.textContent=s)},m(t,f){Q(t,e,f),d||(l=ie(e,"click",i[8]),d=!0)},p:rt,d(t){t&&u(e),d=!1,l()}}}function jt(i){let e,s,d,l;return{c(){e=o("img"),this.h()},l(t){e=c(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,s=i[4].icon)||a(e,"src",s),a(e,"alt",""),a(e,"class","svelte-1icyjj8")},m(t,f){Q(t,e,f),d||(l=ie(e,"click",i[8]),d=!0)},p(t,f){f&16&&!ve(e.src,s=t[4].icon)&&a(e,"src",s)},d(t){t&&u(e),d=!1,l()}}}function wt(i){let e,s="Upload Refsheet",d,l;return{c(){e=o("button"),e.textContent=s},l(t){e=c(t,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-oeurci"&&(e.textContent=s)},m(t,f){Q(t,e,f),d||(l=ie(e,"click",i[8]),d=!0)},p:rt,d(t){t&&u(e),d=!1,l()}}}function Ct(i){let e,s,d,l;return{c(){e=o("img"),this.h()},l(t){e=c(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,s=i[4].refsheet)||a(e,"src",s),a(e,"alt",""),a(e,"class","svelte-1icyjj8")},m(t,f){Q(t,e,f),d||(l=ie(e,"click",i[8]),d=!0)},p(t,f){f&16&&!ve(e.src,s=t[4].refsheet)&&a(e,"src",s)},d(t){t&&u(e),d=!1,l()}}}function Et(i){let e,s,d,l,t,f,Y,h,g,S,Z,T,D,U,ce="Character :",le,j,m,$,w,N="Create",O,C,ge,be,ee,A,E,W,Ge="Icon",ye,ke,je,B,we,Ce,I,X,He="Refsheet",Ee,Ie,Te,P,De,$e,te,z,G,ae,xe="Tags",Ae,R,Le,Ve,H,ne,Je="Stats",Me,q,Ne,se,Ue,Ke;document.title=e="Creating "+(i[4].name||"a character");let b=i[0]&&nt(i),y=i[1]&&st(i);function ct(r){i[9](r)}let Qe={};i[4].description!==void 0&&(Qe.markdown=i[4].description),C=new gt({props:Qe}),_e.push(()=>Pe(C,"markdown",ct));function We(r,p){return r[4].icon?jt:kt}let de=We(i),L=de(i);function Xe(r,p){return r[4].refsheet?Ct:wt}let ue=Xe(i),V=ue(i);function dt(r){i[11](r)}let Ye={placeholder:"Add keywords"};i[3]!==void 0&&(Ye.keywordsList=i[3]),R=new bt({props:Ye}),_e.push(()=>Pe(R,"keywordsList",dt));function ut(r){i[12](r)}let Ze={};return i[2]!==void 0&&(Ze.data=i[2]),q=new yt({props:Ze}),_e.push(()=>Pe(q,"data",ut)),{c(){s=o("meta"),d=o("meta"),l=o("meta"),t=o("meta"),f=o("meta"),Y=_(),h=o("main"),g=o("div"),b&&b.c(),S=_(),y&&y.c(),Z=_(),T=o("div"),D=o("div"),U=o("h1"),U.textContent=ce,le=_(),j=o("input"),$=_(),w=o("button"),w.textContent=N,O=_(),Re(C.$$.fragment),be=_(),ee=o("div"),A=o("form"),E=o("div"),W=o("label"),W.textContent=Ge,ye=_(),ke=o("br"),je=_(),B=o("input"),we=_(),L.c(),Ce=_(),I=o("div"),X=o("label"),X.textContent=He,Ee=_(),Ie=o("br"),Te=_(),P=o("input"),De=_(),V.c(),$e=_(),te=o("div"),z=o("div"),G=o("div"),ae=o("h3"),ae.textContent=xe,Ae=_(),Re(R.$$.fragment),Ve=_(),H=o("div"),ne=o("h3"),ne.textContent=Je,Me=_(),Re(q.$$.fragment),this.h()},l(r){const p=_t("svelte-14sd4o7",document.head);s=c(p,"META",{name:!0,content:!0}),d=c(p,"META",{name:!0,content:!0}),l=c(p,"META",{property:!0,content:!0}),t=c(p,"META",{property:!0,content:!0}),f=c(p,"META",{property:!0,content:!0}),p.forEach(u),Y=v(r),h=c(r,"MAIN",{});var oe=k(h);g=c(oe,"DIV",{class:!0});var M=k(g);b&&b.l(M),S=v(M),y&&y.l(M),Z=v(M),T=c(M,"DIV",{class:!0});var F=k(T);D=c(F,"DIV",{class:!0});var re=k(D);U=c(re,"H1",{class:!0,"data-svelte-h":!0}),K(U)!=="svelte-ynt621"&&(U.textContent=ce),le=v(re),j=c(re,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),$=v(re),w=c(re,"BUTTON",{"data-svelte-h":!0}),K(w)!=="svelte-n5fxji"&&(w.textContent=N),re.forEach(u),O=v(F),qe(C.$$.fragment,F),be=v(F),ee=c(F,"DIV",{class:!0});var et=k(ee);A=c(et,"FORM",{action:!0,class:!0,method:!0,id:!0});var fe=k(A);E=c(fe,"DIV",{class:!0});var x=k(E);W=c(x,"LABEL",{for:!0,"data-svelte-h":!0}),K(W)!=="svelte-16b1hwa"&&(W.textContent=Ge),ye=v(x),ke=c(x,"BR",{}),je=v(x),B=c(x,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),we=v(x),L.l(x),x.forEach(u),Ce=v(fe),I=c(fe,"DIV",{class:!0});var J=k(I);X=c(J,"LABEL",{for:!0,"data-svelte-h":!0}),K(X)!=="svelte-1ahd2x6"&&(X.textContent=He),Ee=v(J),Ie=c(J,"BR",{}),Te=v(J),P=c(J,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),De=v(J),V.l(J),J.forEach(u),fe.forEach(u),et.forEach(u),F.forEach(u),$e=v(M),te=c(M,"DIV",{class:!0});var tt=k(te);z=c(tt,"DIV",{class:!0});var me=k(z);G=c(me,"DIV",{class:!0});var pe=k(G);ae=c(pe,"H3",{"data-svelte-h":!0}),K(ae)!=="svelte-1nl40cx"&&(ae.textContent=xe),Ae=v(pe),qe(R.$$.fragment,pe),pe.forEach(u),Ve=v(me),H=c(me,"DIV",{class:!0});var he=k(H);ne=c(he,"H3",{"data-svelte-h":!0}),K(ne)!=="svelte-5zwsxb"&&(ne.textContent=Je),Me=v(he),qe(q.$$.fragment,he),he.forEach(u),me.forEach(u),tt.forEach(u),M.forEach(u),oe.forEach(u),this.h()},h(){a(s,"name","author"),a(s,"content","Add a character"),a(d,"name","description"),a(d,"content","Find and host any original characters"),a(l,"property","og:title"),a(l,"content","Add a character"),a(t,"property","og:description"),a(t,"content","Find and host any original characters"),a(f,"property","og:image"),a(f,"content","https://persona-db.xyz/favicon.png"),a(U,"class","svelte-1icyjj8"),a(j,"type","text"),a(j,"name","name"),a(j,"id","name"),a(j,"placeholder","Give a name to the character"),a(j,"autocomplete","off"),j.value=m=i[4].name,a(j,"class","svelte-1icyjj8"),a(D,"class","inline-name svelte-1icyjj8"),a(W,"for","icon"),a(B,"type","file"),a(B,"name","icon"),a(B,"id","icon"),a(B,"max","1"),B.hidden=!0,a(B,"class","svelte-1icyjj8"),a(E,"class","setting-icon"),a(X,"for","refsheet"),a(P,"type","file"),a(P,"name","refsheet"),a(P,"id","refsheet"),a(P,"max","1"),P.hidden=!0,a(P,"class","svelte-1icyjj8"),a(I,"class","setting-refsheet"),a(A,"action",""),a(A,"class","images-form svelte-1icyjj8"),a(A,"method","put"),a(A,"id","images-form"),a(ee,"class","images-corner svelte-1icyjj8"),a(T,"class","box svelte-1icyjj8"),a(G,"class","tags-box"),a(H,"class","stats-box svelte-1icyjj8"),a(z,"class","inline svelte-1icyjj8"),a(te,"class","box svelte-1icyjj8"),a(g,"class","container")},m(r,p){n(document.head,s),n(document.head,d),n(document.head,l),n(document.head,t),n(document.head,f),Q(r,Y,p),Q(r,h,p),n(h,g),b&&b.m(g,null),n(g,S),y&&y.m(g,null),n(g,Z),n(g,T),n(T,D),n(D,U),n(D,le),n(D,j),n(D,$),n(D,w),n(T,O),Fe(C,T,null),n(T,be),n(T,ee),n(ee,A),n(A,E),n(E,W),n(E,ye),n(E,ke),n(E,je),n(E,B),n(E,we),L.m(E,null),n(A,Ce),n(A,I),n(I,X),n(I,Ee),n(I,Ie),n(I,Te),n(I,P),n(I,De),V.m(I,null),i[10](A),n(g,$e),n(g,te),n(te,z),n(z,G),n(G,ae),n(G,Ae),Fe(R,G,null),n(z,Ve),n(z,H),n(H,ne),n(H,Me),Fe(q,H,null),se=!0,Ue||(Ke=[ie(j,"input",i[6]),ie(w,"click",i[7])],Ue=!0)},p(r,[p]){(!se||p&16)&&e!==(e="Creating "+(r[4].name||"a character"))&&(document.title=e),r[0]?b?b.p(r,p):(b=nt(r),b.c(),b.m(g,S)):b&&(b.d(1),b=null),r[1]?y?y.p(r,p):(y=st(r),y.c(),y.m(g,Z)):y&&(y.d(1),y=null),(!se||p&16&&m!==(m=r[4].name)&&j.value!==m)&&(j.value=m);const oe={};!ge&&p&16&&(ge=!0,oe.markdown=r[4].description,Be(()=>ge=!1)),C.$set(oe),de===(de=We(r))&&L?L.p(r,p):(L.d(1),L=de(r),L&&(L.c(),L.m(E,null))),ue===(ue=Xe(r))&&V?V.p(r,p):(V.d(1),V=ue(r),V&&(V.c(),V.m(I,null)));const M={};!Le&&p&8&&(Le=!0,M.keywordsList=r[3],Be(()=>Le=!1)),R.$set(M);const F={};!Ne&&p&4&&(Ne=!0,F.data=r[2],Be(()=>Ne=!1)),q.$set(F)},i(r){se||(Se(C.$$.fragment,r),Se(R.$$.fragment,r),Se(q.$$.fragment,r),se=!0)},o(r){Oe(C.$$.fragment,r),Oe(R.$$.fragment,r),Oe(q.$$.fragment,r),se=!1},d(r){r&&(u(Y),u(h)),u(s),u(d),u(l),u(t),u(f),b&&b.d(),y&&y.d(),ze(C),L.d(),V.d(),i[10](null),ze(R),ze(q),Ue=!1,mt(Ke)}}}function It(i,e,s){let d="",l="",t,f=[];function Y(m){s(1,l=m),setTimeout(()=>{s(1,l="")},3e3)}let h={name:""};function g(m){s(4,h.name=m.target.value,h)}let S;function Z(m){at.addCharacter({...h,stats:t,tags:f}).then(async $=>{if($.code)return await vt(`/${$.code}`);Y($.message)}).catch($=>{console.log($)})}const T=async m=>new Promise(($,w)=>{const N=new FileReader;N.readAsDataURL(m),N.onload=()=>$(N.result),N.onerror=O=>w(O)});function D(m){let w=m.target.parentNode.querySelector("input[type='file']");w.click(),w.addEventListener("change",async()=>{let N=w.files[0];m.target.src=await T(N);let O=new FormData;O.set("image",N);let C=await at.upload(O);C&&(w.id.includes("icon")?s(4,h.icon=C,h):w.id.includes("refsheet")&&s(4,h.refsheet=C,h))})}function U(m){i.$$.not_equal(h.description,m)&&(h.description=m,s(4,h))}function ce(m){_e[m?"unshift":"push"](()=>{S=m,s(5,S)})}function le(m){f=m,s(3,f)}function j(m){t=m,s(2,t)}return[d,l,t,f,h,S,g,Z,D,U,ce,le,j]}class Mt extends pt{constructor(e){super(),ht(this,e,It,Et,ft,{})}}export{Mt as component};
