import{s as nt,b as oe,a as ge,r as rt,n as et,d as ve}from"../chunks/scheduler.BWOwpdHh.js";import{S as ot,i as ct,s as b,e as d,v as ut,d as m,m as k,c as _,a as w,w as c,b as D,q as f,t as $,f as P,h as Ae,z as be,j as ke,n as Q,l as ye,p as we,A as se,g as Me,u as je,k as tt,o as st,r as lt}from"../chunks/index.MrXRJrN0.js";import{g as We}from"../chunks/entry.Cbhw0m9C.js";import"../chunks/stores.B2cYib0m.js";import{M as ft,S as dt,T as at}from"../chunks/MarkdownEditor.BN6mLRls.js";import{a as Pe}from"../chunks/api.DB7-yUPC.js";function _t({params:a}){return a}const Lt=Object.freeze(Object.defineProperty({__proto__:null,load:_t},Symbol.toStringTag,{value:"Module"}));function Xe(a){let e,i,l,r,s,t="Character :",u,o,U,B,A,ce="Edit",le,V,ae,ie,W,ne,h,y,v,E,X="Icon",M,Ce,Ee,R,Ie,De,I,Y,Re="Refsheet",Le,Te,$e,q,Ve,ue,Z,G,O,x,qe="Stats",Se,Ne,F,ee,Oe="Tags",Ue,L,T,re,Be,Fe,j=a[0]&&Ye(a),C=a[1]&&Ze(a);function it(n){a[10](n)}let ze={};a[4].description!==void 0&&(ze.markdown=a[4].description),V=new ft({props:ze}),oe.push(()=>be(V,"markdown",it));function Ge(n,p){return n[4].icon?pt:mt}let fe=Ge(a),S=fe(a);function He(n,p){return n[4].refsheet?vt:ht}let de=He(a),N=de(a),g=a[4]&&a[4].stats&&xe(a);const Je=[bt,gt],H=[];function Ke(n,p){return n[4]&&n[4].tags?0:1}return L=Ke(a),T=H[L]=Je[L](a),{c(){j&&j.c(),e=b(),C&&C.c(),i=b(),l=d("div"),r=d("div"),s=d("h1"),s.textContent=t,u=b(),o=d("input"),B=b(),A=d("button"),A.textContent=ce,le=b(),ke(V.$$.fragment),ie=b(),W=d("div"),ne=b(),h=d("div"),y=d("form"),v=d("div"),E=d("label"),E.textContent=X,M=b(),Ce=d("br"),Ee=b(),R=d("input"),Ie=b(),S.c(),De=b(),I=d("div"),Y=d("label"),Y.textContent=Re,Le=b(),Te=d("br"),$e=b(),q=d("input"),Ve=b(),N.c(),ue=b(),Z=d("div"),G=d("div"),O=d("div"),x=d("h3"),x.textContent=qe,Se=b(),g&&g.c(),Ne=b(),F=d("div"),ee=d("h3"),ee.textContent=Oe,Ue=b(),T.c(),this.h()},l(n){j&&j.l(n),e=k(n),C&&C.l(n),i=k(n),l=_(n,"DIV",{class:!0});var p=w(l);r=_(p,"DIV",{class:!0});var z=w(r);s=_(z,"H1",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-ynt621"&&(s.textContent=t),u=k(z),o=_(z,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),B=k(z),A=_(z,"BUTTON",{"data-svelte-h":!0}),Q(A)!=="svelte-h0ynbm"&&(A.textContent=ce),z.forEach(m),le=k(p),ye(V.$$.fragment,p),ie=k(p),W=_(p,"DIV",{id:!0}),w(W).forEach(m),ne=k(p),h=_(p,"DIV",{class:!0});var te=w(h);y=_(te,"FORM",{action:!0,class:!0,method:!0,id:!0});var _e=w(y);v=_(_e,"DIV",{class:!0});var J=w(v);E=_(J,"LABEL",{for:!0,"data-svelte-h":!0}),Q(E)!=="svelte-16b1hwa"&&(E.textContent=X),M=k(J),Ce=_(J,"BR",{}),Ee=k(J),R=_(J,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),Ie=k(J),S.l(J),J.forEach(m),De=k(_e),I=_(_e,"DIV",{class:!0});var K=w(I);Y=_(K,"LABEL",{for:!0,"data-svelte-h":!0}),Q(Y)!=="svelte-1ahd2x6"&&(Y.textContent=Re),Le=k(K),Te=_(K,"BR",{}),$e=k(K),q=_(K,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),Ve=k(K),N.l(K),K.forEach(m),_e.forEach(m),te.forEach(m),p.forEach(m),ue=k(n),Z=_(n,"DIV",{class:!0});var Qe=w(Z);G=_(Qe,"DIV",{class:!0});var me=w(G);O=_(me,"DIV",{class:!0});var pe=w(O);x=_(pe,"H3",{"data-svelte-h":!0}),Q(x)!=="svelte-5zwsxb"&&(x.textContent=qe),Se=k(pe),g&&g.l(pe),pe.forEach(m),Ne=k(me),F=_(me,"DIV",{class:!0});var he=w(F);ee=_(he,"H3",{"data-svelte-h":!0}),Q(ee)!=="svelte-1nl40cx"&&(ee.textContent=Oe),Ue=k(he),T.l(he),he.forEach(m),me.forEach(m),Qe.forEach(m),this.h()},h(){c(s,"class","svelte-1icyjj8"),c(o,"type","text"),c(o,"name","name"),c(o,"id","name"),c(o,"placeholder","Give a name to the character"),c(o,"autocomplete","off"),o.value=U=a[4].name,c(o,"class","svelte-1icyjj8"),c(r,"class","inline-name svelte-1icyjj8"),c(W,"id","editorjs"),c(E,"for","icon"),c(R,"type","file"),c(R,"name","icon"),c(R,"id","icon"),c(R,"max","1"),R.hidden=!0,c(R,"class","svelte-1icyjj8"),c(v,"class","setting-icon"),c(Y,"for","refsheet"),c(q,"type","file"),c(q,"name","refsheet"),c(q,"id","refsheet"),c(q,"max","1"),q.hidden=!0,c(q,"class","svelte-1icyjj8"),c(I,"class","setting-refsheet"),c(y,"action",""),c(y,"class","images-form svelte-1icyjj8"),c(y,"method","put"),c(y,"id","images-form"),c(h,"class","images-corner svelte-1icyjj8"),c(l,"class","box svelte-1icyjj8"),c(O,"class","stats-box svelte-1icyjj8"),c(F,"class","tag-box svelte-1icyjj8"),c(G,"class","inline svelte-1icyjj8"),c(Z,"class","box svelte-1icyjj8")},m(n,p){j&&j.m(n,p),D(n,e,p),C&&C.m(n,p),D(n,i,p),D(n,l,p),f(l,r),f(r,s),f(r,u),f(r,o),f(r,B),f(r,A),f(l,le),we(V,l,null),f(l,ie),f(l,W),f(l,ne),f(l,h),f(h,y),f(y,v),f(v,E),f(v,M),f(v,Ce),f(v,Ee),f(v,R),f(v,Ie),S.m(v,null),f(y,De),f(y,I),f(I,Y),f(I,Le),f(I,Te),f(I,$e),f(I,q),f(I,Ve),N.m(I,null),a[11](y),D(n,ue,p),D(n,Z,p),f(Z,G),f(G,O),f(O,x),f(O,Se),g&&g.m(O,null),f(G,Ne),f(G,F),f(F,ee),f(F,Ue),H[L].m(F,null),re=!0,Be||(Fe=[se(o,"input",a[6]),se(A,"click",a[7])],Be=!0)},p(n,p){n[0]?j?j.p(n,p):(j=Ye(n),j.c(),j.m(e.parentNode,e)):j&&(j.d(1),j=null),n[1]?C?C.p(n,p):(C=Ze(n),C.c(),C.m(i.parentNode,i)):C&&(C.d(1),C=null),(!re||p&16&&U!==(U=n[4].name)&&o.value!==U)&&(o.value=U);const z={};!ae&&p&16&&(ae=!0,z.markdown=n[4].description,ge(()=>ae=!1)),V.$set(z),fe===(fe=Ge(n))&&S?S.p(n,p):(S.d(1),S=fe(n),S&&(S.c(),S.m(v,null))),de===(de=He(n))&&N?N.p(n,p):(N.d(1),N=de(n),N&&(N.c(),N.m(I,null))),n[4]&&n[4].stats?g?(g.p(n,p),p&16&&$(g,1)):(g=xe(n),g.c(),$(g,1),g.m(O,null)):g&&(Me(),P(g,1,1,()=>{g=null}),Ae());let te=L;L=Ke(n),L===te?H[L].p(n,p):(Me(),P(H[te],1,1,()=>{H[te]=null}),Ae(),T=H[L],T?T.p(n,p):(T=H[L]=Je[L](n),T.c()),$(T,1),T.m(F,null))},i(n){re||($(V.$$.fragment,n),$(g),$(T),re=!0)},o(n){P(V.$$.fragment,n),P(g),P(T),re=!1},d(n){n&&(m(e),m(i),m(l),m(ue),m(Z)),j&&j.d(n),C&&C.d(n),je(V),S.d(),N.d(),a[11](null),g&&g.d(),H[L].d(),Be=!1,rt(Fe)}}}function Ye(a){let e,i,l;return{c(){e=d("div"),i=d("p"),l=tt(a[0]),this.h()},l(r){e=_(r,"DIV",{class:!0});var s=w(e);i=_(s,"P",{});var t=w(i);l=st(t,a[0]),t.forEach(m),s.forEach(m),this.h()},h(){c(e,"class","success alert svelte-1icyjj8")},m(r,s){D(r,e,s),f(e,i),f(i,l)},p(r,s){s&1&&lt(l,r[0])},d(r){r&&m(e)}}}function Ze(a){let e,i,l;return{c(){e=d("div"),i=d("p"),l=tt(a[1]),this.h()},l(r){e=_(r,"DIV",{class:!0});var s=w(e);i=_(s,"P",{});var t=w(i);l=st(t,a[1]),t.forEach(m),s.forEach(m),this.h()},h(){c(e,"class","error alert svelte-1icyjj8")},m(r,s){D(r,e,s),f(e,i),f(i,l)},p(r,s){s&2&&lt(l,r[1])},d(r){r&&m(e)}}}function mt(a){let e,i="Upload Icon",l,r;return{c(){e=d("button"),e.textContent=i},l(s){e=_(s,"BUTTON",{"data-svelte-h":!0}),Q(e)!=="svelte-qnmkvj"&&(e.textContent=i)},m(s,t){D(s,e,t),l||(r=se(e,"click",a[8]),l=!0)},p:et,d(s){s&&m(e),l=!1,r()}}}function pt(a){let e,i,l,r;return{c(){e=d("img"),this.h()},l(s){e=_(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,i=a[4].icon)||c(e,"src",i),c(e,"alt",""),c(e,"class","svelte-1icyjj8")},m(s,t){D(s,e,t),l||(r=se(e,"click",a[8]),l=!0)},p(s,t){t&16&&!ve(e.src,i=s[4].icon)&&c(e,"src",i)},d(s){s&&m(e),l=!1,r()}}}function ht(a){let e,i="Upload Refsheet",l,r;return{c(){e=d("button"),e.textContent=i},l(s){e=_(s,"BUTTON",{"data-svelte-h":!0}),Q(e)!=="svelte-oeurci"&&(e.textContent=i)},m(s,t){D(s,e,t),l||(r=se(e,"click",a[8]),l=!0)},p:et,d(s){s&&m(e),l=!1,r()}}}function vt(a){let e,i,l,r;return{c(){e=d("img"),this.h()},l(s){e=_(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,i=a[4].refsheet)||c(e,"src",i),c(e,"alt",""),c(e,"class","svelte-1icyjj8")},m(s,t){D(s,e,t),l||(r=se(e,"click",a[8]),l=!0)},p(s,t){t&16&&!ve(e.src,i=s[4].refsheet)&&c(e,"src",i)},d(s){s&&m(e),l=!1,r()}}}function xe(a){let e,i,l;function r(t){a[12](t)}let s={dataToSet:a[4].stats};return a[2]!==void 0&&(s.data=a[2]),e=new dt({props:s}),oe.push(()=>be(e,"data",r)),{c(){ke(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,u){we(e,t,u),l=!0},p(t,u){const o={};u&16&&(o.dataToSet=t[4].stats),!i&&u&4&&(i=!0,o.data=t[2],ge(()=>i=!1)),e.$set(o)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){je(e,t)}}}function gt(a){let e,i,l;function r(t){a[14](t)}let s={placeholder:"Add keywords"};return a[3]!==void 0&&(s.keywordsList=a[3]),e=new at({props:s}),oe.push(()=>be(e,"keywordsList",r)),{c(){ke(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,u){we(e,t,u),l=!0},p(t,u){const o={};!i&&u&8&&(i=!0,o.keywordsList=t[3],ge(()=>i=!1)),e.$set(o)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){je(e,t)}}}function bt(a){let e,i,l;function r(t){a[13](t)}let s={placeholder:"Add keywords",tagsToSet:a[4].tags};return a[3]!==void 0&&(s.keywordsList=a[3]),e=new at({props:s}),oe.push(()=>be(e,"keywordsList",r)),{c(){ke(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,u){we(e,t,u),l=!0},p(t,u){const o={};u&16&&(o.tagsToSet=t[4].tags),!i&&u&8&&(i=!0,o.keywordsList=t[3],ge(()=>i=!1)),e.$set(o)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){je(e,t)}}}function kt(a){let e,i,l,r,s;document.title=e="Editing "+(a[4]&&a[4].name||"a character");let t=a[4]&&Xe(a);return{c(){i=b(),l=d("main"),r=d("div"),t&&t.c(),this.h()},l(u){ut("svelte-624mu2",document.head).forEach(m),i=k(u),l=_(u,"MAIN",{});var U=w(l);r=_(U,"DIV",{class:!0});var B=w(r);t&&t.l(B),B.forEach(m),U.forEach(m),this.h()},h(){c(r,"class","container")},m(u,o){D(u,i,o),D(u,l,o),f(l,r),t&&t.m(r,null),s=!0},p(u,[o]){(!s||o&16)&&e!==(e="Editing "+(u[4]&&u[4].name||"a character"))&&(document.title=e),u[4]?t?(t.p(u,o),o&16&&$(t,1)):(t=Xe(u),t.c(),$(t,1),t.m(r,null)):t&&(Me(),P(t,1,1,()=>{t=null}),Ae())},i(u){s||($(t),s=!0)},o(u){P(t),s=!1},d(u){u&&(m(i),m(l)),t&&t.d()}}}function yt(a,e,i){let{data:l}=e,r="",s="",t,u=[],o=null;(async()=>{try{i(4,o=await Pe.getCharacter(l.id))}catch{await We("/discover")}})();function U(h){i(4,o.name=h.target.value,o)}let B;function A(h){o&&Pe.updateCharacter({...o,tags:u,stats:t}).then(async y=>{await We(`/${o.code}`)}).catch(y=>{console.log(y)})}const ce=async h=>new Promise((y,v)=>{const E=new FileReader;E.readAsDataURL(h),E.onload=()=>y(E.result),E.onerror=X=>v(X)});function le(h){let v=h.target.parentNode.querySelector("input[type='file']");v.click(),v.addEventListener("change",async()=>{let E=v.files[0];h.target.src=await ce(E);let X=new FormData;X.set("image",E);try{let M=await Pe.upload(X);M&&(v.id.includes("icon")?i(4,o.icon=M,o):v.id.includes("refsheet")&&i(4,o.refsheet=M,o))}catch(M){console.log(M)}})}function V(h){a.$$.not_equal(o.description,h)&&(o.description=h,i(4,o))}function ae(h){oe[h?"unshift":"push"](()=>{B=h,i(5,B)})}function ie(h){t=h,i(2,t)}function W(h){u=h,i(3,u)}function ne(h){u=h,i(3,u)}return a.$$set=h=>{"data"in h&&i(9,l=h.data)},[r,s,t,u,o,B,U,A,le,l,V,ae,ie,W,ne]}class Tt extends ot{constructor(e){super(),ct(this,e,yt,kt,nt,{data:9})}}export{Tt as component,Lt as universal};
