import{s as mt,b as _e,a as Be,r as pt,n as lt,d as ve}from"../chunks/scheduler.BWOwpdHh.js";import{S as ht,i as _t,z as Pe,e as o,s as _,j as Re,v as vt,c,d as u,m as v,a as k,n as K,l as qe,w as a,q as n,b as Q,p as Fe,A as le,t as Se,f as Oe,u as ze,k as it,o as ot,r as ct}from"../chunks/index.MrXRJrN0.js";import{g as gt}from"../chunks/entry.FLlzqz6F.js";import{a as at,r as nt}from"../chunks/stores.q1PpW4Db.js";import{M as bt,T as yt,S as kt}from"../chunks/MarkdownEditor.Zi-qCKPb.js";function st(l){let e,s,d;return{c(){e=o("div"),s=o("p"),d=it(l[0]),this.h()},l(i){e=c(i,"DIV",{class:!0});var t=k(e);s=c(t,"P",{});var f=k(s);d=ot(f,l[0]),f.forEach(u),t.forEach(u),this.h()},h(){a(e,"class","success alert svelte-1icyjj8")},m(i,t){Q(i,e,t),n(e,s),n(s,d)},p(i,t){t&1&&ct(d,i[0])},d(i){i&&u(e)}}}function rt(l){let e,s,d;return{c(){e=o("div"),s=o("p"),d=it(l[1]),this.h()},l(i){e=c(i,"DIV",{class:!0});var t=k(e);s=c(t,"P",{});var f=k(s);d=ot(f,l[1]),f.forEach(u),t.forEach(u),this.h()},h(){a(e,"class","error alert svelte-1icyjj8")},m(i,t){Q(i,e,t),n(e,s),n(s,d)},p(i,t){t&2&&ct(d,i[1])},d(i){i&&u(e)}}}function jt(l){let e,s="Upload Icon",d,i;return{c(){e=o("button"),e.textContent=s},l(t){e=c(t,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-qnmkvj"&&(e.textContent=s)},m(t,f){Q(t,e,f),d||(i=le(e,"click",l[8]),d=!0)},p:lt,d(t){t&&u(e),d=!1,i()}}}function wt(l){let e,s,d,i;return{c(){e=o("img"),this.h()},l(t){e=c(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,s=l[4].icon)||a(e,"src",s),a(e,"alt",""),a(e,"class","svelte-1icyjj8")},m(t,f){Q(t,e,f),d||(i=le(e,"click",l[8]),d=!0)},p(t,f){f&16&&!ve(e.src,s=t[4].icon)&&a(e,"src",s)},d(t){t&&u(e),d=!1,i()}}}function Ct(l){let e,s="Upload Refsheet",d,i;return{c(){e=o("button"),e.textContent=s},l(t){e=c(t,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-oeurci"&&(e.textContent=s)},m(t,f){Q(t,e,f),d||(i=le(e,"click",l[8]),d=!0)},p:lt,d(t){t&&u(e),d=!1,i()}}}function Et(l){let e,s,d,i;return{c(){e=o("img"),this.h()},l(t){e=c(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,s=l[4].refsheet)||a(e,"src",s),a(e,"alt",""),a(e,"class","svelte-1icyjj8")},m(t,f){Q(t,e,f),d||(i=le(e,"click",l[8]),d=!0)},p(t,f){f&16&&!ve(e.src,s=t[4].refsheet)&&a(e,"src",s)},d(t){t&&u(e),d=!1,i()}}}function It(l){let e,s,d,i,t,f,Y,h,g,S,Z,T,D,N,ce="Character :",ie,j,m,M,w,U="Create",O,C,ge,be,ee,$,E,W,Ge="Icon",ye,ke,je,B,we,Ce,I,X,He="Refsheet",Ee,Ie,Te,P,De,$e,te,z,G,ae,xe="Tags",Ae,R,Le,Ve,H,ne,Je="Stats",Me,q,Ue,se,Ne,Ke;document.title=e="Creating "+(l[4].name||"a character");let b=l[0]&&st(l),y=l[1]&&rt(l);function dt(r){l[9](r)}let Qe={};l[4].description!==void 0&&(Qe.markdown=l[4].description),C=new bt({props:Qe}),_e.push(()=>Pe(C,"markdown",dt));function We(r,p){return r[4].icon?wt:jt}let de=We(l),A=de(l);function Xe(r,p){return r[4].refsheet?Et:Ct}let ue=Xe(l),L=ue(l);function ut(r){l[11](r)}let Ye={placeholder:"Add keywords"};l[3]!==void 0&&(Ye.keywordsList=l[3]),R=new yt({props:Ye}),_e.push(()=>Pe(R,"keywordsList",ut));function ft(r){l[12](r)}let Ze={};return l[2]!==void 0&&(Ze.data=l[2]),q=new kt({props:Ze}),_e.push(()=>Pe(q,"data",ft)),{c(){s=o("meta"),d=o("meta"),i=o("meta"),t=o("meta"),f=o("meta"),Y=_(),h=o("main"),g=o("div"),b&&b.c(),S=_(),y&&y.c(),Z=_(),T=o("div"),D=o("div"),N=o("h1"),N.textContent=ce,ie=_(),j=o("input"),M=_(),w=o("button"),w.textContent=U,O=_(),Re(C.$$.fragment),be=_(),ee=o("div"),$=o("form"),E=o("div"),W=o("label"),W.textContent=Ge,ye=_(),ke=o("br"),je=_(),B=o("input"),we=_(),A.c(),Ce=_(),I=o("div"),X=o("label"),X.textContent=He,Ee=_(),Ie=o("br"),Te=_(),P=o("input"),De=_(),L.c(),$e=_(),te=o("div"),z=o("div"),G=o("div"),ae=o("h3"),ae.textContent=xe,Ae=_(),Re(R.$$.fragment),Ve=_(),H=o("div"),ne=o("h3"),ne.textContent=Je,Me=_(),Re(q.$$.fragment),this.h()},l(r){const p=vt("svelte-14sd4o7",document.head);s=c(p,"META",{name:!0,content:!0}),d=c(p,"META",{name:!0,content:!0}),i=c(p,"META",{property:!0,content:!0}),t=c(p,"META",{property:!0,content:!0}),f=c(p,"META",{property:!0,content:!0}),p.forEach(u),Y=v(r),h=c(r,"MAIN",{});var oe=k(h);g=c(oe,"DIV",{class:!0});var V=k(g);b&&b.l(V),S=v(V),y&&y.l(V),Z=v(V),T=c(V,"DIV",{class:!0});var F=k(T);D=c(F,"DIV",{class:!0});var re=k(D);N=c(re,"H1",{class:!0,"data-svelte-h":!0}),K(N)!=="svelte-ynt621"&&(N.textContent=ce),ie=v(re),j=c(re,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),M=v(re),w=c(re,"BUTTON",{"data-svelte-h":!0}),K(w)!=="svelte-n5fxji"&&(w.textContent=U),re.forEach(u),O=v(F),qe(C.$$.fragment,F),be=v(F),ee=c(F,"DIV",{class:!0});var et=k(ee);$=c(et,"FORM",{action:!0,class:!0,method:!0,id:!0});var fe=k($);E=c(fe,"DIV",{class:!0});var x=k(E);W=c(x,"LABEL",{for:!0,"data-svelte-h":!0}),K(W)!=="svelte-16b1hwa"&&(W.textContent=Ge),ye=v(x),ke=c(x,"BR",{}),je=v(x),B=c(x,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),we=v(x),A.l(x),x.forEach(u),Ce=v(fe),I=c(fe,"DIV",{class:!0});var J=k(I);X=c(J,"LABEL",{for:!0,"data-svelte-h":!0}),K(X)!=="svelte-1ahd2x6"&&(X.textContent=He),Ee=v(J),Ie=c(J,"BR",{}),Te=v(J),P=c(J,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),De=v(J),L.l(J),J.forEach(u),fe.forEach(u),et.forEach(u),F.forEach(u),$e=v(V),te=c(V,"DIV",{class:!0});var tt=k(te);z=c(tt,"DIV",{class:!0});var me=k(z);G=c(me,"DIV",{class:!0});var pe=k(G);ae=c(pe,"H3",{"data-svelte-h":!0}),K(ae)!=="svelte-1nl40cx"&&(ae.textContent=xe),Ae=v(pe),qe(R.$$.fragment,pe),pe.forEach(u),Ve=v(me),H=c(me,"DIV",{class:!0});var he=k(H);ne=c(he,"H3",{"data-svelte-h":!0}),K(ne)!=="svelte-5zwsxb"&&(ne.textContent=Je),Me=v(he),qe(q.$$.fragment,he),he.forEach(u),me.forEach(u),tt.forEach(u),V.forEach(u),oe.forEach(u),this.h()},h(){a(s,"name","author"),a(s,"content","Add a character"),a(d,"name","description"),a(d,"content","Find and host any original characters"),a(i,"property","og:title"),a(i,"content","Add a character"),a(t,"property","og:description"),a(t,"content","Find and host any original characters"),a(f,"property","og:image"),a(f,"content","https://persona-db.xyz/favicon.png"),a(N,"class","svelte-1icyjj8"),a(j,"type","text"),a(j,"name","name"),a(j,"id","name"),a(j,"placeholder","Give a name to the character"),a(j,"autocomplete","off"),j.value=m=l[4].name,a(j,"class","svelte-1icyjj8"),a(D,"class","inline-name svelte-1icyjj8"),a(W,"for","icon"),a(B,"type","file"),a(B,"name","icon"),a(B,"id","icon"),a(B,"max","1"),B.hidden=!0,a(B,"class","svelte-1icyjj8"),a(E,"class","setting-icon"),a(X,"for","refsheet"),a(P,"type","file"),a(P,"name","refsheet"),a(P,"id","refsheet"),a(P,"max","1"),P.hidden=!0,a(P,"class","svelte-1icyjj8"),a(I,"class","setting-refsheet"),a($,"action",""),a($,"class","images-form svelte-1icyjj8"),a($,"method","put"),a($,"id","images-form"),a(ee,"class","images-corner svelte-1icyjj8"),a(T,"class","box svelte-1icyjj8"),a(G,"class","tags-box"),a(H,"class","stats-box svelte-1icyjj8"),a(z,"class","inline svelte-1icyjj8"),a(te,"class","box svelte-1icyjj8"),a(g,"class","container")},m(r,p){n(document.head,s),n(document.head,d),n(document.head,i),n(document.head,t),n(document.head,f),Q(r,Y,p),Q(r,h,p),n(h,g),b&&b.m(g,null),n(g,S),y&&y.m(g,null),n(g,Z),n(g,T),n(T,D),n(D,N),n(D,ie),n(D,j),n(D,M),n(D,w),n(T,O),Fe(C,T,null),n(T,be),n(T,ee),n(ee,$),n($,E),n(E,W),n(E,ye),n(E,ke),n(E,je),n(E,B),n(E,we),A.m(E,null),n($,Ce),n($,I),n(I,X),n(I,Ee),n(I,Ie),n(I,Te),n(I,P),n(I,De),L.m(I,null),l[10]($),n(g,$e),n(g,te),n(te,z),n(z,G),n(G,ae),n(G,Ae),Fe(R,G,null),n(z,Ve),n(z,H),n(H,ne),n(H,Me),Fe(q,H,null),se=!0,Ne||(Ke=[le(j,"input",l[6]),le(w,"click",l[7])],Ne=!0)},p(r,[p]){(!se||p&16)&&e!==(e="Creating "+(r[4].name||"a character"))&&(document.title=e),r[0]?b?b.p(r,p):(b=st(r),b.c(),b.m(g,S)):b&&(b.d(1),b=null),r[1]?y?y.p(r,p):(y=rt(r),y.c(),y.m(g,Z)):y&&(y.d(1),y=null),(!se||p&16&&m!==(m=r[4].name)&&j.value!==m)&&(j.value=m);const oe={};!ge&&p&16&&(ge=!0,oe.markdown=r[4].description,Be(()=>ge=!1)),C.$set(oe),de===(de=We(r))&&A?A.p(r,p):(A.d(1),A=de(r),A&&(A.c(),A.m(E,null))),ue===(ue=Xe(r))&&L?L.p(r,p):(L.d(1),L=ue(r),L&&(L.c(),L.m(I,null)));const V={};!Le&&p&8&&(Le=!0,V.keywordsList=r[3],Be(()=>Le=!1)),R.$set(V);const F={};!Ue&&p&4&&(Ue=!0,F.data=r[2],Be(()=>Ue=!1)),q.$set(F)},i(r){se||(Se(C.$$.fragment,r),Se(R.$$.fragment,r),Se(q.$$.fragment,r),se=!0)},o(r){Oe(C.$$.fragment,r),Oe(R.$$.fragment,r),Oe(q.$$.fragment,r),se=!1},d(r){r&&(u(Y),u(h)),u(s),u(d),u(i),u(t),u(f),b&&b.d(),y&&y.d(),ze(C),A.d(),L.d(),l[10](null),ze(R),ze(q),Ne=!1,pt(Ke)}}}function Tt(l,e,s){let d="",i="",t,f=[];function Y(m){s(1,i=m),setTimeout(()=>{s(1,i="")},3e3)}let h={name:""};function g(m){s(4,h.name=m.target.value,h)}let S;function Z(m){at.post(`${nt}/characters`,{...h,stats:t,tags:f}).then(async M=>{await gt(`/${M.data.code}`)}).catch(M=>{Y(M.response.data.message)})}const T=async m=>new Promise((M,w)=>{const U=new FileReader;U.readAsDataURL(m),U.onload=()=>M(U.result),U.onerror=O=>w(O)});function D(m){let w=m.target.parentNode.querySelector("input[type='file']");w.click(),w.addEventListener("change",async()=>{let U=w.files[0];m.target.src=await T(U);let O=new FormData;O.set("image",U);try{let C=await at.post(`${nt}/upload`,O);C.data.url&&(w.id.includes("icon")?s(4,h.icon=C.data.url,h):w.id.includes("refsheet")&&s(4,h.refsheet=C.data.url,h))}catch(C){console.log(C)}})}function N(m){l.$$.not_equal(h.description,m)&&(h.description=m,s(4,h))}function ce(m){_e[m?"unshift":"push"](()=>{S=m,s(5,S)})}function ie(m){f=m,s(3,f)}function j(m){t=m,s(2,t)}return[d,i,t,f,h,S,g,Z,D,N,ce,ie,j]}class Mt extends ht{constructor(e){super(),_t(this,e,Tt,It,mt,{})}}export{Mt as component};
