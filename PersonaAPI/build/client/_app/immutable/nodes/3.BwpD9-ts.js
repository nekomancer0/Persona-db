import{s as ct,b as he,a as Ne,r as dt,n as nt,d as _e}from"../chunks/scheduler.BWOwpdHh.js";import{S as ut,i as ft,z as Ue,e as i,s as v,j as Be,v as mt,c,d as u,m as g,a as y,n as Z,l as Pe,w as n,q as a,b as Q,p as Re,A as re,t as qe,f as Fe,u as Se,k as at,o as st,r as rt}from"../chunks/index.MrXRJrN0.js";import{g as pt}from"../chunks/entry.CvtO8IbG.js";import"../chunks/stores.C_hhX81d.js";import{M as ht,T as _t,S as vt}from"../chunks/MarkdownEditor.D6F6XuEz.js";import{a as xe}from"../chunks/api.CI0u685j.js";function et(o){let e,s,d;return{c(){e=i("div"),s=i("p"),d=at(o[0]),this.h()},l(l){e=c(l,"DIV",{class:!0});var t=y(e);s=c(t,"P",{});var f=y(s);d=st(f,o[0]),f.forEach(u),t.forEach(u),this.h()},h(){n(e,"class","success alert svelte-nbk2og")},m(l,t){Q(l,e,t),a(e,s),a(s,d)},p(l,t){t&1&&rt(d,l[0])},d(l){l&&u(e)}}}function tt(o){let e,s,d;return{c(){e=i("div"),s=i("p"),d=at(o[1]),this.h()},l(l){e=c(l,"DIV",{class:!0});var t=y(e);s=c(t,"P",{});var f=y(s);d=st(f,o[1]),f.forEach(u),t.forEach(u),this.h()},h(){n(e,"class","error alert svelte-nbk2og")},m(l,t){Q(l,e,t),a(e,s),a(s,d)},p(l,t){t&2&&rt(d,l[1])},d(l){l&&u(e)}}}function gt(o){let e,s="Upload Icon",d,l;return{c(){e=i("button"),e.textContent=s},l(t){e=c(t,"BUTTON",{"data-svelte-h":!0}),Z(e)!=="svelte-qnmkvj"&&(e.textContent=s)},m(t,f){Q(t,e,f),d||(l=re(e,"click",o[8]),d=!0)},p:nt,d(t){t&&u(e),d=!1,l()}}}function bt(o){let e,s,d,l;return{c(){e=i("img"),this.h()},l(t){e=c(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){_e(e.src,s=o[4].icon)||n(e,"src",s),n(e,"alt",""),n(e,"class","svelte-nbk2og")},m(t,f){Q(t,e,f),d||(l=re(e,"click",o[8]),d=!0)},p(t,f){f&16&&!_e(e.src,s=t[4].icon)&&n(e,"src",s)},d(t){t&&u(e),d=!1,l()}}}function kt(o){let e,s="Upload Refsheet",d,l;return{c(){e=i("button"),e.textContent=s,this.h()},l(t){e=c(t,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-oeurci"&&(e.textContent=s),this.h()},h(){n(e,"class","svelte-nbk2og")},m(t,f){Q(t,e,f),d||(l=re(e,"click",o[8]),d=!0)},p:nt,d(t){t&&u(e),d=!1,l()}}}function wt(o){let e,s,d,l;return{c(){e=i("img"),this.h()},l(t){e=c(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){_e(e.src,s=o[4].refsheet)||n(e,"src",s),n(e,"alt",""),n(e,"class","svelte-nbk2og")},m(t,f){Q(t,e,f),d||(l=re(e,"click",o[8]),d=!0)},p(t,f){f&16&&!_e(e.src,s=t[4].refsheet)&&n(e,"src",s)},d(t){t&&u(e),d=!1,l()}}}function yt(o){let e,s,d,l,t,f,x,h,b,O,ee,T,N,C,W,oe,B,m="Create",D,_,A,j,U,$,E,X,Oe="Icon",ve,ge,be,P,ke,we,I,Y,je="Refsheet",ye,Ce,Ee,R,Ie,Te,te,z,G,ne,ze="Tags",De,q,$e,Ae,H,ae,Ge="Stats",Le,F,Ve,se,Me,He;document.title=e="Creating "+(o[4].name||"a character");let k=o[0]&&et(o),w=o[1]&&tt(o);function ot(r){o[9](r)}let Je={};o[4].description!==void 0&&(Je.markdown=o[4].description),_=new ht({props:Je}),he.push(()=>Ue(_,"markdown",ot));function Ke(r,p){return r[4].icon?bt:gt}let ie=Ke(o),L=ie(o);function Qe(r,p){return r[4].refsheet?wt:kt}let ce=Qe(o),V=ce(o);function lt(r){o[11](r)}let We={placeholder:"Add keywords"};o[3]!==void 0&&(We.keywordsList=o[3]),q=new _t({props:We}),he.push(()=>Ue(q,"keywordsList",lt));function it(r){o[12](r)}let Xe={};return o[2]!==void 0&&(Xe.data=o[2]),F=new vt({props:Xe}),he.push(()=>Ue(F,"data",it)),{c(){s=i("meta"),d=i("meta"),l=i("meta"),t=i("meta"),f=i("meta"),x=v(),h=i("main"),b=i("div"),k&&k.c(),O=v(),w&&w.c(),ee=v(),T=i("div"),N=i("div"),C=i("input"),oe=v(),B=i("button"),B.textContent=m,D=v(),Be(_.$$.fragment),j=v(),U=i("div"),$=i("form"),E=i("div"),X=i("label"),X.textContent=Oe,ve=v(),ge=i("br"),be=v(),P=i("input"),ke=v(),L.c(),we=v(),I=i("div"),Y=i("label"),Y.textContent=je,ye=v(),Ce=i("br"),Ee=v(),R=i("input"),Ie=v(),V.c(),Te=v(),te=i("div"),z=i("div"),G=i("div"),ne=i("h3"),ne.textContent=ze,De=v(),Be(q.$$.fragment),Ae=v(),H=i("div"),ae=i("h3"),ae.textContent=Ge,Le=v(),Be(F.$$.fragment),this.h()},l(r){const p=mt("svelte-14sd4o7",document.head);s=c(p,"META",{name:!0,content:!0}),d=c(p,"META",{name:!0,content:!0}),l=c(p,"META",{property:!0,content:!0}),t=c(p,"META",{property:!0,content:!0}),f=c(p,"META",{property:!0,content:!0}),p.forEach(u),x=g(r),h=c(r,"MAIN",{});var le=y(h);b=c(le,"DIV",{class:!0});var M=y(b);k&&k.l(M),O=g(M),w&&w.l(M),ee=g(M),T=c(M,"DIV",{class:!0});var S=y(T);N=c(S,"DIV",{class:!0});var de=y(N);C=c(de,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),oe=g(de),B=c(de,"BUTTON",{"data-svelte-h":!0}),Z(B)!=="svelte-n5fxji"&&(B.textContent=m),de.forEach(u),D=g(S),Pe(_.$$.fragment,S),j=g(S),U=c(S,"DIV",{class:!0});var Ye=y(U);$=c(Ye,"FORM",{action:!0,class:!0,method:!0,id:!0});var ue=y($);E=c(ue,"DIV",{class:!0});var J=y(E);X=c(J,"LABEL",{for:!0,"data-svelte-h":!0}),Z(X)!=="svelte-16b1hwa"&&(X.textContent=Oe),ve=g(J),ge=c(J,"BR",{}),be=g(J),P=c(J,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),ke=g(J),L.l(J),J.forEach(u),we=g(ue),I=c(ue,"DIV",{class:!0});var K=y(I);Y=c(K,"LABEL",{for:!0,"data-svelte-h":!0}),Z(Y)!=="svelte-1ahd2x6"&&(Y.textContent=je),ye=g(K),Ce=c(K,"BR",{}),Ee=g(K),R=c(K,"INPUT",{type:!0,name:!0,id:!0,max:!0,class:!0}),Ie=g(K),V.l(K),K.forEach(u),ue.forEach(u),Ye.forEach(u),S.forEach(u),Te=g(M),te=c(M,"DIV",{class:!0});var Ze=y(te);z=c(Ze,"DIV",{class:!0});var fe=y(z);G=c(fe,"DIV",{class:!0});var me=y(G);ne=c(me,"H3",{"data-svelte-h":!0}),Z(ne)!=="svelte-1nl40cx"&&(ne.textContent=ze),De=g(me),Pe(q.$$.fragment,me),me.forEach(u),Ae=g(fe),H=c(fe,"DIV",{class:!0});var pe=y(H);ae=c(pe,"H3",{"data-svelte-h":!0}),Z(ae)!=="svelte-5zwsxb"&&(ae.textContent=Ge),Le=g(pe),Pe(F.$$.fragment,pe),pe.forEach(u),fe.forEach(u),Ze.forEach(u),M.forEach(u),le.forEach(u),this.h()},h(){n(s,"name","author"),n(s,"content","Add a character"),n(d,"name","description"),n(d,"content","Find and host any original characters"),n(l,"property","og:title"),n(l,"content","Add a character"),n(t,"property","og:description"),n(t,"content","Find and host any original characters"),n(f,"property","og:image"),n(f,"content","https://persona-db.xyz/favicon.png"),n(C,"type","text"),n(C,"name","name"),n(C,"id","name"),n(C,"placeholder","Give a name to the character"),n(C,"autocomplete","off"),C.value=W=o[4].name,n(C,"class","svelte-nbk2og"),n(N,"class","inline-name svelte-nbk2og"),n(X,"for","icon"),n(P,"type","file"),n(P,"name","icon"),n(P,"id","icon"),n(P,"max","1"),P.hidden=!0,n(P,"class","svelte-nbk2og"),n(E,"class","setting-icon"),n(Y,"for","refsheet"),n(R,"type","file"),n(R,"name","refsheet"),n(R,"id","refsheet"),n(R,"max","1"),R.hidden=!0,n(R,"class","svelte-nbk2og"),n(I,"class","setting-refsheet svelte-nbk2og"),n($,"action",""),n($,"class","images-form svelte-nbk2og"),n($,"method","put"),n($,"id","images-form"),n(U,"class","images-corner svelte-nbk2og"),n(T,"class","box svelte-nbk2og"),n(G,"class","tags-box"),n(H,"class","stats-box svelte-nbk2og"),n(z,"class","inline svelte-nbk2og"),n(te,"class","box svelte-nbk2og"),n(b,"class","container")},m(r,p){a(document.head,s),a(document.head,d),a(document.head,l),a(document.head,t),a(document.head,f),Q(r,x,p),Q(r,h,p),a(h,b),k&&k.m(b,null),a(b,O),w&&w.m(b,null),a(b,ee),a(b,T),a(T,N),a(N,C),a(N,oe),a(N,B),a(T,D),Re(_,T,null),a(T,j),a(T,U),a(U,$),a($,E),a(E,X),a(E,ve),a(E,ge),a(E,be),a(E,P),a(E,ke),L.m(E,null),a($,we),a($,I),a(I,Y),a(I,ye),a(I,Ce),a(I,Ee),a(I,R),a(I,Ie),V.m(I,null),o[10]($),a(b,Te),a(b,te),a(te,z),a(z,G),a(G,ne),a(G,De),Re(q,G,null),a(z,Ae),a(z,H),a(H,ae),a(H,Le),Re(F,H,null),se=!0,Me||(He=[re(C,"input",o[6]),re(B,"click",o[7])],Me=!0)},p(r,[p]){(!se||p&16)&&e!==(e="Creating "+(r[4].name||"a character"))&&(document.title=e),r[0]?k?k.p(r,p):(k=et(r),k.c(),k.m(b,O)):k&&(k.d(1),k=null),r[1]?w?w.p(r,p):(w=tt(r),w.c(),w.m(b,ee)):w&&(w.d(1),w=null),(!se||p&16&&W!==(W=r[4].name)&&C.value!==W)&&(C.value=W);const le={};!A&&p&16&&(A=!0,le.markdown=r[4].description,Ne(()=>A=!1)),_.$set(le),ie===(ie=Ke(r))&&L?L.p(r,p):(L.d(1),L=ie(r),L&&(L.c(),L.m(E,null))),ce===(ce=Qe(r))&&V?V.p(r,p):(V.d(1),V=ce(r),V&&(V.c(),V.m(I,null)));const M={};!$e&&p&8&&($e=!0,M.keywordsList=r[3],Ne(()=>$e=!1)),q.$set(M);const S={};!Ve&&p&4&&(Ve=!0,S.data=r[2],Ne(()=>Ve=!1)),F.$set(S)},i(r){se||(qe(_.$$.fragment,r),qe(q.$$.fragment,r),qe(F.$$.fragment,r),se=!0)},o(r){Fe(_.$$.fragment,r),Fe(q.$$.fragment,r),Fe(F.$$.fragment,r),se=!1},d(r){r&&(u(x),u(h)),u(s),u(d),u(l),u(t),u(f),k&&k.d(),w&&w.d(),Se(_),L.d(),V.d(),o[10](null),Se(q),Se(F),Me=!1,dt(He)}}}function Ct(o,e,s){let d="",l="",t,f=[];function x(m){s(1,l=m),setTimeout(()=>{s(1,l="")},3e3)}let h={name:""};function b(m){s(4,h.name=m.target.value,h)}let O;function ee(m){xe.addCharacter({...h,stats:t,tags:f}).then(async D=>{if(D.code)return await pt(`/${D.code}`);x(D.message)}).catch(D=>{console.log(D)})}const T=async m=>new Promise((D,_)=>{const A=new FileReader;A.readAsDataURL(m),A.onload=()=>D(A.result),A.onerror=j=>_(j)});function N(m){let _=m.target.parentNode.querySelector("input[type='file']");_.click(),_.addEventListener("change",async()=>{let A=_.files[0];m.target.src=await T(A);let j=new FormData;j.set("image",A);let U=await xe.upload(j);U&&(_.id.includes("icon")?s(4,h.icon=U,h):_.id.includes("refsheet")&&s(4,h.refsheet=U,h))})}function C(m){o.$$.not_equal(h.description,m)&&(h.description=m,s(4,h))}function W(m){he[m?"unshift":"push"](()=>{O=m,s(5,O)})}function oe(m){f=m,s(3,f)}function B(m){t=m,s(2,t)}return[d,l,t,f,h,O,b,ee,N,C,W,oe,B]}class Lt extends ut{constructor(e){super(),ft(this,e,Ct,yt,ct,{})}}export{Lt as component};
