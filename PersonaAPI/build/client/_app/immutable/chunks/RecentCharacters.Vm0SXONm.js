import{s as P,n as u}from"./scheduler.BWOwpdHh.js";import{S as q,i as S,e as p,j,s as B,k as F,c as g,a as b,l as H,d as m,m as N,o as G,w as d,b as y,q as v,p as U,r as J,t as k,f as w,u as z,n as K,x as E,g as L,h as M,y as O}from"./index.MrXRJrN0.js";import{h as Q,u as T,e as I}from"./each.MqN4OFCs.js";import{a as D,r as V}from"./stores.q1PpW4Db.js";import{P as W}from"./PartialUser.D7LCOZEA.js";function X(o){let e,s,n,a,c,t,r=o[0].name+"",l,i,f;return n=new W({props:{user:o[1]}}),{c(){e=p("div"),s=p("div"),j(n.$$.fragment),a=B(),c=p("div"),t=p("a"),l=F(r),this.h()},l(h){e=g(h,"DIV",{class:!0});var _=b(e);s=g(_,"DIV",{class:!0});var $=b(s);H(n.$$.fragment,$),$.forEach(m),a=N(_),c=g(_,"DIV",{class:!0});var C=b(c);t=g(C,"A",{href:!0,class:!0});var x=b(t);l=G(x,r),x.forEach(m),C.forEach(m),_.forEach(m),this.h()},h(){d(s,"class","author svelte-rynua2"),d(t,"href",i=`/${o[0].code}`),d(t,"class","svelte-rynua2"),d(c,"class","name"),d(e,"class","character svelte-rynua2")},m(h,_){y(h,e,_),v(e,s),U(n,s,null),v(e,a),v(e,c),v(c,t),v(t,l),f=!0},p(h,[_]){const $={};_&2&&($.user=h[1]),n.$set($),(!f||_&1)&&r!==(r=h[0].name+"")&&J(l,r),(!f||_&1&&i!==(i=`/${h[0].code}`))&&d(t,"href",i)},i(h){f||(k(n.$$.fragment,h),f=!0)},o(h){w(n.$$.fragment,h),f=!1},d(h){h&&m(e),z(n)}}}function Y(o,e,s){let{character:n}=e,{owner:a}=e;return o.$$set=c=>{"character"in c&&s(0,n=c.character),"owner"in c&&s(1,a=c.owner)},[n,a]}class Z extends q{constructor(e){super(),S(this,e,Y,X,P,{character:0,owner:1})}}function A(o,e,s){const n=o.slice();return n[2]=e[s],n}function ee(o){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function te(o){let e,s,n=I(o[1]),a=[];for(let t=0;t<n.length;t+=1)a[t]=R(A(o,n,t));const c=t=>w(a[t],1,1,()=>{a[t]=null});return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=E()},l(t){for(let r=0;r<a.length;r+=1)a[r].l(t);e=E()},m(t,r){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,r);y(t,e,r),s=!0},p(t,r){if(r&1){n=I(t[1]);let l;for(l=0;l<n.length;l+=1){const i=A(t,n,l);a[l]?(a[l].p(i,r),k(a[l],1)):(a[l]=R(i),a[l].c(),k(a[l],1),a[l].m(e.parentNode,e))}for(L(),l=n.length;l<a.length;l+=1)c(l);M()}},i(t){if(!s){for(let r=0;r<n.length;r+=1)k(a[r]);s=!0}},o(t){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)w(a[r]);s=!1},d(t){t&&m(e),O(a,t)}}}function R(o){let e,s;return e=new Z({props:{character:o[2],owner:o[2].user}}),{c(){j(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,a){U(e,n,a),s=!0},p:u,i(n){s||(k(e.$$.fragment,n),s=!0)},o(n){w(e.$$.fragment,n),s=!1},d(n){z(e,n)}}}function ae(o){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function re(o){let e,s,n="Activity",a,c,t,r={ctx:o,current:null,token:null,hasCatch:!1,pending:ae,then:te,catch:ee,value:1,blocks:[,,,]};return Q(o[0](),r),{c(){e=p("div"),s=p("h3"),s.textContent=n,a=B(),c=p("div"),r.block.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var i=b(e);s=g(i,"H3",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-p7nwy5"&&(s.textContent=n),a=N(i),c=g(i,"DIV",{class:!0});var f=b(c);r.block.l(f),f.forEach(m),i.forEach(m),this.h()},h(){d(s,"class","svelte-uc0bar"),d(c,"class","recent-characters svelte-uc0bar"),d(e,"class","box svelte-uc0bar")},m(l,i){y(l,e,i),v(e,s),v(e,a),v(e,c),r.block.m(c,r.anchor=null),r.mount=()=>c,r.anchor=null,t=!0},p(l,[i]){o=l,T(r,o,i)},i(l){t||(k(r.block),t=!0)},o(l){for(let i=0;i<3;i+=1){const f=r.blocks[i];w(f)}t=!1},d(l){l&&m(e),r.block.d(),r.token=null,r=null}}}function ne(o){async function e(){let s=[],a=(await D.get(`${V}/characters`)).data;for(let c of a){let t=await D.get(`${V}/users/${c.ownerId}`);s.push({...c,user:t.data})}return s.sort((c,t)=>c.editedAt-t.editedAt).reverse().slice(0,5)}return[e]}class ue extends q{constructor(e){super(),S(this,e,ne,re,P,{})}}export{ue as R};
