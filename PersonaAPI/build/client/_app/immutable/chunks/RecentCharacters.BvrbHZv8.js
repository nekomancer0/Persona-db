import{s as A,n as u}from"./scheduler.BWOwpdHh.js";import{S as P,i as R,e as v,j as S,s as U,k as z,c as g,a as k,l as j,d,m as B,o as F,w as m,b as C,q as p,p as H,r as G,t as b,f as w,u as N,n as J,x as I,g as K,h as L,y as M}from"./index.MrXRJrN0.js";import{h as O,u as Q,e as q}from"./each.MqN4OFCs.js";import{P as T}from"./PartialUser.0Mh093ly.js";/* empty css                                                       */import{a as x}from"./api.CI0u685j.js";function W(c){let e,s,t,a,o,r,n=c[0].name+"",l,i,f;return t=new T({props:{user:c[1]}}),{c(){e=v("div"),s=v("div"),S(t.$$.fragment),a=U(),o=v("div"),r=v("a"),l=z(n),this.h()},l(h){e=g(h,"DIV",{class:!0});var _=k(e);s=g(_,"DIV",{class:!0});var $=k(s);j(t.$$.fragment,$),$.forEach(d),a=B(_),o=g(_,"DIV",{class:!0});var y=k(o);r=g(y,"A",{href:!0,class:!0});var E=k(r);l=F(E,n),E.forEach(d),y.forEach(d),_.forEach(d),this.h()},h(){m(s,"class","author svelte-nnkgeq"),m(r,"href",i=`/${c[0].code}`),m(r,"class","svelte-nnkgeq"),m(o,"class","name"),m(e,"class","character svelte-nnkgeq")},m(h,_){C(h,e,_),p(e,s),H(t,s,null),p(e,a),p(e,o),p(o,r),p(r,l),f=!0},p(h,[_]){const $={};_&2&&($.user=h[1]),t.$set($),(!f||_&1)&&n!==(n=h[0].name+"")&&G(l,n),(!f||_&1&&i!==(i=`/${h[0].code}`))&&m(r,"href",i)},i(h){f||(b(t.$$.fragment,h),f=!0)},o(h){w(t.$$.fragment,h),f=!1},d(h){h&&d(e),N(t)}}}function X(c,e,s){let{character:t}=e,{owner:a}=e;return c.$$set=o=>{"character"in o&&s(0,t=o.character),"owner"in o&&s(1,a=o.owner)},[t,a]}class Y extends P{constructor(e){super(),R(this,e,X,W,A,{character:0,owner:1})}}function D(c,e,s){const t=c.slice();return t[2]=e[s],t}function Z(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function ee(c){let e,s,t=q(c[1]),a=[];for(let r=0;r<t.length;r+=1)a[r]=V(D(c,t,r));const o=r=>w(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=I()},l(r){for(let n=0;n<a.length;n+=1)a[n].l(r);e=I()},m(r,n){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(r,n);C(r,e,n),s=!0},p(r,n){if(n&1){t=q(r[1]);let l;for(l=0;l<t.length;l+=1){const i=D(r,t,l);a[l]?(a[l].p(i,n),b(a[l],1)):(a[l]=V(i),a[l].c(),b(a[l],1),a[l].m(e.parentNode,e))}for(K(),l=t.length;l<a.length;l+=1)o(l);L()}},i(r){if(!s){for(let n=0;n<t.length;n+=1)b(a[n]);s=!0}},o(r){a=a.filter(Boolean);for(let n=0;n<a.length;n+=1)w(a[n]);s=!1},d(r){r&&d(e),M(a,r)}}}function V(c){let e,s;return e=new Y({props:{character:c[2],owner:c[2].user}}),{c(){S(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p:u,i(t){s||(b(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function te(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function ae(c){let e,s,t="Activity",a,o,r,n={ctx:c,current:null,token:null,hasCatch:!1,pending:te,then:ee,catch:Z,value:1,blocks:[,,,]};return O(c[0](),n),{c(){e=v("div"),s=v("h3"),s.textContent=t,a=U(),o=v("div"),n.block.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var i=k(e);s=g(i,"H3",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-p7nwy5"&&(s.textContent=t),a=B(i),o=g(i,"DIV",{class:!0});var f=k(o);n.block.l(f),f.forEach(d),i.forEach(d),this.h()},h(){m(s,"class","svelte-uc0bar"),m(o,"class","recent-characters svelte-uc0bar"),m(e,"class","box svelte-uc0bar")},m(l,i){C(l,e,i),p(e,s),p(e,a),p(e,o),n.block.m(o,n.anchor=null),n.mount=()=>o,n.anchor=null,r=!0},p(l,[i]){c=l,Q(n,c,i)},i(l){r||(b(n.block),r=!0)},o(l){for(let i=0;i<3;i+=1){const f=n.blocks[i];w(f)}r=!1},d(l){l&&d(e),n.block.d(),n.token=null,n=null}}}function re(c){async function e(){return(await Promise.all((await x.getCharacters()).map(async t=>({...t,user:await x.getUser(t.ownerId)})))).sort((t,a)=>t.editedAt-a.editedAt).reverse().slice(0,5)}return[e]}class ue extends P{constructor(e){super(),R(this,e,re,ae,A,{})}}export{ue as R};
