import{s as P,n as u}from"./scheduler.BWOwpdHh.js";import{S as R,i as q,e as p,j as S,s as U,k as z,c as g,a as b,l as j,d as m,m as B,o as F,w as d,b as y,q as v,p as H,r as G,t as k,f as w,u as N,n as J,x as I,g as K,h as L,y as M}from"./index.MrXRJrN0.js";import{h as O,u as Q,e as x}from"./each.MqN4OFCs.js";import{P as T}from"./PartialUser.BxFKzfuP.js";import{a as D}from"./api.DB7-yUPC.js";function W(c){let e,s,t,a,o,r,n=c[0].name+"",l,i,f;return t=new T({props:{user:c[1]}}),{c(){e=p("div"),s=p("div"),S(t.$$.fragment),a=U(),o=p("div"),r=p("a"),l=z(n),this.h()},l(h){e=g(h,"DIV",{class:!0});var _=b(e);s=g(_,"DIV",{class:!0});var $=b(s);j(t.$$.fragment,$),$.forEach(m),a=B(_),o=g(_,"DIV",{class:!0});var C=b(o);r=g(C,"A",{href:!0,class:!0});var E=b(r);l=F(E,n),E.forEach(m),C.forEach(m),_.forEach(m),this.h()},h(){d(s,"class","author svelte-rynua2"),d(r,"href",i=`/${c[0].code}`),d(r,"class","svelte-rynua2"),d(o,"class","name"),d(e,"class","character svelte-rynua2")},m(h,_){y(h,e,_),v(e,s),H(t,s,null),v(e,a),v(e,o),v(o,r),v(r,l),f=!0},p(h,[_]){const $={};_&2&&($.user=h[1]),t.$set($),(!f||_&1)&&n!==(n=h[0].name+"")&&G(l,n),(!f||_&1&&i!==(i=`/${h[0].code}`))&&d(r,"href",i)},i(h){f||(k(t.$$.fragment,h),f=!0)},o(h){w(t.$$.fragment,h),f=!1},d(h){h&&m(e),N(t)}}}function X(c,e,s){let{character:t}=e,{owner:a}=e;return c.$$set=o=>{"character"in o&&s(0,t=o.character),"owner"in o&&s(1,a=o.owner)},[t,a]}class Y extends R{constructor(e){super(),q(this,e,X,W,P,{character:0,owner:1})}}function V(c,e,s){const t=c.slice();return t[2]=e[s],t}function Z(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function ee(c){let e,s,t=x(c[1]),a=[];for(let r=0;r<t.length;r+=1)a[r]=A(V(c,t,r));const o=r=>w(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=I()},l(r){for(let n=0;n<a.length;n+=1)a[n].l(r);e=I()},m(r,n){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(r,n);y(r,e,n),s=!0},p(r,n){if(n&1){t=x(r[1]);let l;for(l=0;l<t.length;l+=1){const i=V(r,t,l);a[l]?(a[l].p(i,n),k(a[l],1)):(a[l]=A(i),a[l].c(),k(a[l],1),a[l].m(e.parentNode,e))}for(K(),l=t.length;l<a.length;l+=1)o(l);L()}},i(r){if(!s){for(let n=0;n<t.length;n+=1)k(a[n]);s=!0}},o(r){a=a.filter(Boolean);for(let n=0;n<a.length;n+=1)w(a[n]);s=!1},d(r){r&&m(e),M(a,r)}}}function A(c){let e,s;return e=new Y({props:{character:c[2],owner:c[2].user}}),{c(){S(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){H(e,t,a),s=!0},p:u,i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function te(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function ae(c){let e,s,t="Activity",a,o,r,n={ctx:c,current:null,token:null,hasCatch:!1,pending:te,then:ee,catch:Z,value:1,blocks:[,,,]};return O(c[0](),n),{c(){e=p("div"),s=p("h3"),s.textContent=t,a=U(),o=p("div"),n.block.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var i=b(e);s=g(i,"H3",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-p7nwy5"&&(s.textContent=t),a=B(i),o=g(i,"DIV",{class:!0});var f=b(o);n.block.l(f),f.forEach(m),i.forEach(m),this.h()},h(){d(s,"class","svelte-uc0bar"),d(o,"class","recent-characters svelte-uc0bar"),d(e,"class","box svelte-uc0bar")},m(l,i){y(l,e,i),v(e,s),v(e,a),v(e,o),n.block.m(o,n.anchor=null),n.mount=()=>o,n.anchor=null,r=!0},p(l,[i]){c=l,Q(n,c,i)},i(l){r||(k(n.block),r=!0)},o(l){for(let i=0;i<3;i+=1){const f=n.blocks[i];w(f)}r=!1},d(l){l&&m(e),n.block.d(),n.token=null,n=null}}}function re(c){async function e(){return(await Promise.all((await D.getCharacters()).map(async t=>({...t,user:await D.getUser(t.ownerId)})))).sort((t,a)=>t.editedAt-a.editedAt).reverse().slice(0,5)}return[e]}class ie extends R{constructor(e){super(),q(this,e,re,ae,P,{})}}export{ie as R};
